<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Площадка</title>
    <link rel="stylesheet" href="styles.css">
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <style>
        html, body { width: 100%; height: 100%; margin: 0; overflow: hidden; }
        canvas { width: 100%; height: 100%; display: block; }
    </style>
</head>
<body>
    <!-- Кнопка запуска приложения -->
    <div id="launchContainer">
        <button id="launchApp">Запустить приложение</button>
    </div>
    
    <!-- Модальное окно выбора площадки -->
    <div id="platformSelectModal" class="modal">
        <div class="modal-content platform-select-content">
            <h3>Выберите параметры площадки</h3>
            
            <!-- Добавляем превью площадки -->
            <div class="playground-preview">
                <model-viewer id="playgroundPreview" 
                    src="models/playgrounds/playground.glb" 
                    auto-rotate 
                    camera-controls 
                    disable-zoom 
                    ar-status="not-presenting" 
                    rotation-per-second="30deg" 
                    camera-orbit="0deg 75deg 4m"
                    field-of-view="20deg"
                    alt="Предпросмотр площадки">
                </model-viewer>
            </div>
            
            <div class="platform-settings">
                <div class="control-group">
                    <label for="modalPlaygroundType">Площадка:</label>
                    <select id="modalPlaygroundType">
                        <option value="playground.glb" selected>Площадка 1</option>
                        <option value="playground2.glb">Площадка 2</option>
                        <option value="basketball_court.glb">Площадка 3</option>
                    </select>
                </div>
                <div class="control-group">
                    <label for="modalPlaygroundWidth">Ширина (м):</label>
                    <input type="number" id="modalPlaygroundWidth" min="5" max="50" value="37.82" step="1">
                </div>
                <div class="control-group">
                    <label for="modalPlaygroundLength">Длина (м):</label>
                    <input type="number" id="modalPlaygroundLength" min="5" max="50" value="30.03" step="1">
                </div>
            </div>
            <div class="platform-buttons">
                <button id="startAppButton" class="action-button">Запустить</button>
                <button id="cancelAppButton" class="action-button">Отмена</button>
            </div>
        </div>
    </div>
    
    <!-- Модальное окно приложения -->
    <div id="appModal" class="modal">
        <div class="modal-content">
            <button id="closeAppButton">Закрыть приложение</button>
    <div id="sidebar">
        <h3>Выберите элемент</h3>
        <div class="item" draggable="true" data-model="0001.glb">
            <model-viewer src="models/0001.glb" auto-rotate camera-controls disable-zoom ar-status="not-presenting" rotation-per-second="30deg" alt="MG0001 Качели-балансир двойной"></model-viewer>
            <p>MG0001 Качели-балансир двойной</p>
        </div>
        <div class="item" draggable="true" data-model="242.glb">
            <model-viewer src="models/242.glb" auto-rotate camera-controls disable-zoom ar-status="not-presenting" rotation-per-second="30deg" alt="ЛГГ-24-2 Горка h=950 (HPL)"></model-viewer>
            <p>ЛГГ-24-2 Горка h=950 (HPL)</p>
        </div>
        <div class="item" draggable="true" data-model="0502.glb">
            <model-viewer src="models/0502.glb" auto-rotate camera-controls disable-zoom ar-status="not-presenting" rotation-per-second="30deg" alt="MG0502 Качели одинарные"></model-viewer>
            <p>MG0502 Качели одинарные</p>
        </div>
        <div class="item" draggable="true" data-model="0519.glb">
            <model-viewer src="models/0519.glb" auto-rotate camera-controls disable-zoom ar-status="not-presenting" rotation-per-second="30deg" alt="Качели 0519"></model-viewer>
            <p>Качели 0519</p>
        </div>
        <div class="item" draggable="true" data-model="3540.glb">
            <model-viewer src="models/3540.glb" auto-rotate camera-controls disable-zoom ar-status="not-presenting" rotation-per-second="30deg" alt="MG3540 Спортивное оборудование Лазательный комплекс"></model-viewer>
            <p>MG3540 Спортивное оборудование Лазательный комплекс</p>
        </div>
        <div class="item" draggable="true" data-model="4209.glb">
            <model-viewer src="models/4209.glb" auto-rotate camera-controls disable-zoom ar-status="not-presenting" rotation-per-second="30deg" alt="MG4209 Спортивный комплекс"></model-viewer>
            <p>MG4209 Спортивный комплекс</p>
        </div>
        <div class="item" draggable="true" data-model="Taiga_v1.glb">
            <model-viewer src="models/Taiga_v1.glb" auto-rotate camera-controls disable-zoom ar-status="not-presenting" rotation-per-second="30deg" alt="Каркас качелей-балансира -Тайга-"></model-viewer>
            <p>Каркас качелей-балансира Тайга</p>
        </div>
        <div class="item" draggable="true" data-model="lgd_3.glb">
            <model-viewer src="models/lgd_3.glb" auto-rotate camera-controls disable-zoom ar-status="not-presenting" rotation-per-second="30deg" alt="Модель lgd_3"></model-viewer>
            <p>Модель lgd_3</p>
        </div>
        <div class="item" draggable="true" data-model="lgk_11.glb">
            <model-viewer src="models/lgk_11.glb" auto-rotate camera-controls disable-zoom ar-status="not-presenting" rotation-per-second="30deg" alt="Модель lgk_11"></model-viewer>
            <p>Модель lgk_11</p>
        </div>
        <div class="item" draggable="true" data-model="миссури.glb">
            <model-viewer src="models/миссури.glb" auto-rotate camera-controls disable-zoom ar-status="not-presenting" rotation-per-second="30deg" alt="Модель lgk_314"></model-viewer>
            <p>Модель lgk_314</p>
        </div>
        <div class="item" draggable="true" data-model="MG0001 2024-09 R2 Модель.glb">
            <model-viewer src="models/MG0001 2024-09 R2 Модель.glb" auto-rotate camera-controls disable-zoom ar-status="not-presenting" rotation-per-second="30deg" alt="MG0001 Качели-балансир двойной"></model-viewer>
            <p>MG0001 Качели-балансир двойной</p>
        </div>
        <div class="item" draggable="true" data-model="дуга.glb">
            <model-viewer src="models/дуга.glb" auto-rotate camera-controls disable-zoom ar-status="not-presenting" rotation-per-second="30deg" alt="Модель msk_105"></model-viewer>
            <p>Модель msk_105</p>
        </div>
        <div class="item" draggable="true" data-model="msk_201.glb">
            <model-viewer src="models/msk_201.glb" auto-rotate camera-controls disable-zoom ar-status="not-presenting" rotation-per-second="30deg" alt="Модель msk_201"></model-viewer>
            <p>Модель msk_201</p>
        </div>
    </div>
    <canvas id="renderCanvas"></canvas>
    <div id="controlPanel">
        <div class="control-panel">
            <button id="changePlayground">Сменить площадку</button>
            <button id="resetView" style="margin-top: 10px; background-color: #2196F3;">Сбросить вид</button>
            <button id="topView" style="margin-top: 10px; background-color: #4CAF50;">Вид сверху</button>
            <button id="saveScreenshot" style="margin-top: 10px; background-color: #673AB7;">Сделать скриншот</button>
            <div id="playgroundStatus" style="margin-top: 10px; font-size: 12px; color: #666;">
                Информация о размерах площадки
            </div>
        </div>
    </div>
    <div id="dimensionLabels">
        <div id="widthLabel" class="dimension-label">10м</div>
        <div id="lengthLabel" class="dimension-label">10м</div>
    </div>
    <!-- Удаляем элемент позиционного статуса -->
    <div id="notification" class="notification hidden">
        <div class="notification-content">
            <span class="notification-message">Объект не может быть размещен в этой позиции!</span>
            <span class="notification-close" onclick="document.getElementById('notification').classList.add('hidden')">&times;</span>
        </div>
    </div>
    <!-- Добавляем оверлей с индикатором загрузки -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="loading-spinner"></div>
        <div class="loading-text">Загрузка площадки...</div>
    </div>
            <!-- Подключаем модули JavaScript с указанием type="module" -->
            <script type="module" src="js/app.js"></script>
        </div>
    </div>
    
    <!-- Подключаем модуль для управления модальным окном -->
    <script type="module" src="js/modal.js"></script>
</body>
</html>