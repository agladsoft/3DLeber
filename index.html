<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Площадка - Конфигуратор детских площадок</title>
    
    <!-- Подключаем новые стили -->
    <link rel="stylesheet" href="css/styles.css">
    
    <!-- Model Viewer -->
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    
    <!-- Шрифты -->
    <link href="https://fonts.googleapis.com/css2?family=Inter+Tight:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        html, body { width: 100%; height: 100%; margin: 0; overflow: hidden; }
        canvas { width: 100%; height: 100%; display: block; }
        
        /* Загрузочный экран */
        #loadingScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #f5f5f5;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            font-family: 'Inter Tight', sans-serif;
        }
        
        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #F05323;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-text {
            font-size: 18px;
            color: #333;
            margin-bottom: 10px;
        }
        
        .loading-subtext {
            font-size: 14px;
            color: #666;
        }
        
        #loadingScreen.hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- Загрузочный экран -->
    <div id="loadingScreen">
        <div class="loading-spinner"></div>
        <div class="loading-text">Загрузка приложения...</div>
        <div class="loading-subtext">Проверка доступа</div>
    </div>
    
    <!-- Модальное окно выбора площадки -->
    <div id="platformSelectModal" class="modal">
        <div class="modal-content platform-select-content">
            <h3>ВЫБЕРИТЕ<br>ПАРАМЕТРЫ ПЛОЩАДКИ</h3>
            
            <div class="platform-settings">
                <div class="control-group">
                    <input type="number" id="modalPlaygroundWidth" min="10" max="100" value="" placeholder="Ширина, м" class="modern-input">
                </div>
                <div class="control-group">
                    <input type="number" id="modalPlaygroundLength" min="10" max="100" value="" placeholder="Длина, м" class="modern-input">
                </div>
                <div class="control-group">
                    <label>Цвет площадки:</label>
                    <div class="horizontal-color-picker modern-color-picker">
                        <span class="color-square modern-square selected" data-color="серый" style="background-color: #D9D9D9;"></span>
                        <span class="color-square modern-square" data-color="черный" style="background-color: #100F0F;"></span>
                        <span class="color-square modern-square" data-color="зеленый" style="background-color: #2E7D32;"></span>
                        <span class="color-square modern-square" data-color="коричневый" style="background-color: #5D4037;"></span>
                        <span class="color-square modern-square" data-color="синий" style="background-color: #1976D2;"></span>
                        <span class="color-square modern-square" data-color="красный" style="background-color: #D32F2F;"></span>
                        <span class="color-square modern-square" data-color="фиолетовый" style="background-color: #7B1FA2;"></span>
                        <span class="color-square modern-square" data-color="оранжевый" style="background-color: #F57C00;"></span>
                        <span class="color-square modern-square" data-color="желтый" style="background-color: #FBC02D;"></span>
                        <span class="color-square modern-square" data-color="розовый" style="background-color: #C2185B;"></span>
                        <span class="color-square modern-square" data-color="бирюзовый" style="background-color: #00ACC1;"></span>
                        <span class="color-square modern-square" data-color="лайм" style="background-color: #689F38;"></span>
                    </div>
                    <input type="hidden" id="modalPlaygroundColor" value="серый">
                </div>
            </div>
            <div class="platform-buttons modern-buttons">
                <button id="cancelPlatformButton" class="action-button modern-button outline-button">Отмена</button>
                <button id="startAppButton" class="action-button modern-button filled-button">Создать</button>
            </div>
        </div>
    </div>

    <!-- Модальное окно управления сессией -->
    <div id="sessionModal" class="modal">
        <div class="modal-content session-select-content">
            <h3>Управление сессией</h3>
            <div class="session-buttons">
                <button id="continueSessionButton" class="action-button secondary-button">Продолжить сессию</button>
                <button id="newSessionButton" class="action-button primary-button">Начать новую сессию</button>
            </div>
        </div>
    </div>
    
    <!-- Модальное окно настройки площадки -->
    <div id="playgroundSettings" class="modal hidden">
        <div class="modal-content playground-modal">
            <h2>Площадка</h2>
            
            <div class="input-row">
                <div class="input-container">
                    <input type="number" id="playground-width" min="10" max="100" placeholder="Ширина, м" value="40" class="playground-input">
                </div>
                <div class="input-container">
                    <input type="number" id="playground-length" min="10" max="100" placeholder="Длина, м" value="30" class="playground-input">
                </div>
            </div>
            
            <div class="color-section">
                <p>Цвет площадки:</p>
                <div class="color-options">
                    <div class="color-option selected" data-color="#d9d9d9" style="background-color: #d9d9d9;"></div>
                    <div class="color-option" data-color="#1f1f1f" style="background-color: #1f1f1f;"></div>
                    <div class="color-option" data-color="#2B7A30" style="background-color: #2B7A30;"></div>
                    <div class="color-option" data-color="#6E4C3D" style="background-color: #6E4C3D;"></div>
                    <div class="color-option" data-color="#1976D2" style="background-color: #1976D2;"></div>
                    <div class="color-option" data-color="#D32F2F" style="background-color: #D32F2F;"></div>
                    <div class="color-option" data-color="#7B1FA2" style="background-color: #7B1FA2;"></div>
                    <div class="color-option" data-color="#F57C00" style="background-color: #F57C00;"></div>
                    <div class="color-option" data-color="#FBC02D" style="background-color: #FBC02D;"></div>
                    <div class="color-option" data-color="#C2185B" style="background-color: #C2185B;"></div>
                    <div class="color-option" data-color="#00ACC1" style="background-color: #00ACC1;"></div>
                    <div class="color-option" data-color="#689F38" style="background-color: #689F38;"></div>
                </div>
            </div>
            
            <button id="apply-playground-settings" class="apply-button">Применить</button>
        </div>
    </div>
    <!-- Модальное окно приложения -->
    <div id="appModal" class="modal">
        <div class="modal-content">
            <!-- Canvas для 3D сцены -->
            <canvas id="renderCanvas"></canvas>
            
            <!-- Левое меню с категориями -->
            <div id="sidebar"></div>
            
            <!-- Правая панель управления (новый дизайн) -->
            <div id="controlPanel" class="control-panel-new">
                <!-- Кнопка настроек (круглая) -->
                <div class="tool-circle">
                    <button class="tool-button-new settings" id="settingsButton">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M19.4 15C19.2669 15.3016 19.2272 15.6362 19.286 15.9606C19.3448 16.285 19.4995 16.5843 19.73 16.82L19.79 16.88C19.976 17.0657 20.1235 17.2863 20.2241 17.5291C20.3248 17.7719 20.3766 18.0322 20.3766 18.295C20.3766 18.5578 20.3248 18.8181 20.2241 19.0609C20.1235 19.3037 19.976 19.5243 19.79 19.71C19.6043 19.896 19.3837 20.0435 19.1409 20.1441C18.8981 20.2448 18.6378 20.2966 18.375 20.2966C18.1122 20.2966 17.8519 20.2448 17.6091 20.1441C17.3663 20.0435 17.1457 19.896 16.96 19.71L16.9 19.65C16.6643 19.4195 16.365 19.2648 16.0406 19.206C15.7162 19.1472 15.3816 19.1869 15.08 19.32C14.7842 19.4468 14.532 19.6572 14.3543 19.9255C14.1766 20.1938 14.0813 20.5082 14.08 20.83V21C14.08 21.5304 13.8693 22.0391 13.4942 22.4142C13.1191 22.7893 12.6104 23 12.08 23C11.5496 23 11.0409 22.7893 10.6658 22.4142C10.2907 22.0391 10.08 21.5304 10.08 21V20.91C10.0723 20.579 9.96512 20.258 9.77251 19.9887C9.5799 19.7194 9.31074 19.5143 9 19.4C8.69838 19.2669 8.36381 19.2272 8.03941 19.286C7.71502 19.3448 7.41568 19.4995 7.18 19.73L7.12 19.79C6.93425 19.976 6.71368 20.1235 6.47088 20.2241C6.22808 20.3248 5.96783 20.3766 5.705 20.3766C5.44217 20.3766 5.18192 20.3248 4.93912 20.2241C4.69632 20.1235 4.47575 19.976 4.29 19.79C4.10405 19.6043 3.95653 19.3837 3.85588 19.1409C3.75523 18.8981 3.70343 18.6378 3.70343 18.375C3.70343 18.1122 3.75523 17.8519 3.85588 17.6091C3.95653 17.3663 4.10405 17.1457 4.29 16.96L4.35 16.9C4.58054 16.6643 4.73519 16.365 4.794 16.0406C4.85282 15.7162 4.81312 15.3816 4.68 15.08C4.55324 14.7842 4.34276 14.532 4.07447 14.3543C3.80618 14.1766 3.49179 14.0813 3.17 14.08H3C2.46957 14.08 1.96086 13.8693 1.58579 13.4942C1.21071 13.1191 1 12.6104 1 12.08C1 11.5496 1.21071 11.0409 1.58579 10.6658C1.96086 10.2907 2.46957 10.08 3 10.08H3.09C3.42099 10.0723 3.742 9.96512 4.0113 9.77251C4.28059 9.5799 4.48572 9.31074 4.6 9C4.73312 8.69838 4.77282 8.36381 4.714 8.03941C4.65519 7.71502 4.50054 7.41568 4.27 7.18L4.21 7.12C4.02405 6.93425 3.87653 6.71368 3.77588 6.47088C3.67523 6.22808 3.62343 5.96783 3.62343 5.705C3.62343 5.44217 3.67523 5.18192 3.77588 4.93912C3.87653 4.69632 4.02405 4.47575 4.21 4.29C4.39575 4.10405 4.61632 3.95653 4.85912 3.85588C5.10192 3.75523 5.36217 3.70343 5.625 3.70343C5.88783 3.70343 6.14808 3.75523 6.39088 3.85588C6.63368 3.95653 6.85425 4.10405 7.04 4.29L7.1 4.35C7.33568 4.58054 7.63502 4.73519 7.95941 4.794C8.28381 4.85282 8.61838 4.81312 8.92 4.68H9C9.29577 4.55324 9.54802 4.34276 9.72569 4.07447C9.90337 3.80618 9.99872 3.49179 10 3.17V3C10 2.46957 10.2107 1.96086 10.5858 1.58579C10.9609 1.21071 11.4696 1 12 1C12.5304 1 13.0391 1.21071 13.4142 1.58579C13.7893 1.96086 14 2.46957 14 3V3.09C14.0013 3.41179 14.0966 3.72618 14.2743 3.99447C14.452 4.26276 14.7042 4.47324 15 4.6C15.3016 4.73312 15.6362 4.77282 15.9606 4.714C16.285 4.65519 16.5843 4.50054 16.82 4.27L16.88 4.21C17.0657 4.02405 17.2863 3.87653 17.5291 3.77588C17.7719 3.67523 18.0322 3.62343 18.295 3.62343C18.5578 3.62343 18.8181 3.67523 19.0609 3.77588C19.3037 3.87653 19.5243 4.02405 19.71 4.21C19.896 4.39575 20.0435 4.61632 20.1441 4.85912C20.2448 5.10192 20.2966 5.36217 20.2966 5.625C20.2966 5.88783 20.2448 6.14808 20.1441 6.39088C20.0435 6.63368 19.896 6.85425 19.71 7.04L19.65 7.1C19.4195 7.33568 19.2648 7.63502 19.206 7.95941C19.1472 8.28381 19.1869 8.61838 19.32 8.92V9C19.4468 9.29577 19.6572 9.54802 19.9255 9.72569C20.1938 9.90337 20.5082 9.99872 20.83 10H21C21.5304 10 22.0391 10.2107 22.4142 10.5858C22.7893 10.9609 23 11.4696 23 12C23 12.5304 22.7893 13.0391 22.4142 13.4142C22.0391 13.7893 21.5304 14 21 14H20.91C20.5882 14.0013 20.2738 14.0966 20.0055 14.2743C19.7372 14.452 19.5268 14.7042 19.4 15Z" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
                
                <div class="tool-buttons-container">
                    <!-- Кнопка сброса вида -->
                    <button class="tool-button-new" id="resetView">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12.0001 22.7499C6.80008 22.7499 2.58008 18.5199 2.58008 13.3299C2.58008 8.1399 6.80008 3.8999 12.0001 3.8999C13.0701 3.8999 14.1101 4.0499 15.1101 4.3599C15.5101 4.4799 15.7301 4.8999 15.6101 5.2999C15.4901 5.6999 15.0701 5.9199 14.6701 5.7999C13.8201 5.5399 12.9201 5.3999 12.0001 5.3999C7.63008 5.3999 4.08008 8.9499 4.08008 13.3199C4.08008 17.6899 7.63008 21.2399 12.0001 21.2399C16.3701 21.2399 19.9201 17.6899 19.9201 13.3199C19.9201 11.7399 19.4601 10.2199 18.5901 8.9199C18.3601 8.5799 18.4501 8.1099 18.8001 7.8799C19.1401 7.6499 19.6101 7.7399 19.8401 8.0899C20.8801 9.6399 21.4301 11.4499 21.4301 13.3299C21.4201 18.5199 17.2001 22.7499 12.0001 22.7499Z" fill="#100F0F"/>
                            <path d="M16.13 6.07021C15.92 6.07021 15.71 5.98021 15.56 5.81021L12.67 2.49021C12.4 2.18021 12.43 1.70021 12.74 1.43021C13.05 1.16021 13.53 1.19021 13.8 1.50021L16.69 4.82021C16.96 5.13021 16.93 5.61021 16.62 5.88021C16.49 6.01021 16.31 6.07021 16.13 6.07021Z" fill="#100F0F"/>
                            <path d="M12.76 8.5302C12.53 8.5302 12.3 8.4202 12.15 8.2202C11.91 7.8902 11.98 7.4202 12.31 7.1702L15.68 4.7102C16.01 4.4602 16.48 4.5402 16.73 4.8702C16.98 5.2002 16.9 5.6702 16.57 5.9202L13.2 8.3902C13.07 8.4902 12.92 8.5302 12.76 8.5302Z" fill="#100F0F"/>
                        </svg>
                    </button>
                    
                    <!-- Кнопка для скачивания/экспорта -->
                    <button class="tool-button-new" id="exportModel">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 22.75H9C3.57 22.75 1.25 20.43 1.25 15V9C1.25 3.57 3.57 1.25 9 1.25H15C20.43 1.25 22.75 3.57 22.75 9V15C22.75 20.43 20.43 22.75 15 22.75ZM9 2.75C4.39 2.75 2.75 4.39 2.75 9V15C2.75 19.61 4.39 21.25 9 21.25H15C19.61 21.25 21.25 19.61 21.25 15V9C21.25 4.39 19.61 2.75 15 2.75H9Z" fill="#100F0F"/>
                            <path d="M11.9999 15.2602C11.8099 15.2602 11.6199 15.1902 11.4699 15.0402L8.46994 12.0402C8.17994 11.7502 8.17994 11.2702 8.46994 10.9802C8.75994 10.6902 9.23994 10.6902 9.52994 10.9802L11.9999 13.4502L14.4699 10.9802C14.7599 10.6902 15.2399 10.6902 15.5299 10.9802C15.8199 11.2702 15.8199 11.7502 15.5299 12.0402L12.5299 15.0402C12.3799 15.1902 12.1899 15.2602 11.9999 15.2602Z" fill="#100F0F"/>
                            <path d="M12 15.2598C11.59 15.2598 11.25 14.9198 11.25 14.5098V6.50977C11.25 6.09977 11.59 5.75977 12 5.75977C12.41 5.75977 12.75 6.09977 12.75 6.50977V14.5098C12.75 14.9298 12.41 15.2598 12 15.2598Z" fill="#100F0F"/>
                            <path d="M11.9999 18.2302C9.88994 18.2302 7.76995 17.8902 5.75995 17.2202C5.36995 17.0902 5.15995 16.6602 5.28995 16.2702C5.41995 15.8802 5.83994 15.6602 6.23994 15.8002C9.95994 17.0402 14.0499 17.0402 17.7699 15.8002C18.1599 15.6702 18.5899 15.8802 18.7199 16.2702C18.8499 16.6602 18.6399 17.0902 18.2499 17.2202C16.2299 17.9002 14.1099 18.2302 11.9999 18.2302Z" fill="#100F0F"/>
                        </svg>
                    </button>
                    
                    <!-- Кнопка для размеров -->
                    <button class="tool-button-new" id="toggleDimensions">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M21.5334 6.5H7.96667C7.15665 6.5 6.5 7.15665 6.5 7.96667V21.5334C6.5 22.3434 7.15665 23 7.96667 23H21.5334C22.3434 23 23 22.3434 23 21.5334V7.96667C23 7.15665 22.3434 6.5 21.5334 6.5ZM22.2667 7.96667V21.5334C22.2658 21.5967 22.2567 21.6597 22.2396 21.7207L15.2685 14.75L22.2396 7.7793C22.2567 7.84032 22.2658 7.90331 22.2667 7.96667ZM21.5334 7.23334C21.5968 7.2342 21.6598 7.24344 21.7207 7.26084L14.75 14.2316L7.7793 7.26084C7.84027 7.24344 7.90328 7.2342 7.96667 7.23334H21.5334ZM7.26047 21.7207C7.24337 21.6597 7.23425 21.5967 7.23334 21.5334V7.96667C7.23425 7.90331 7.24337 7.84032 7.26047 7.7793L14.2316 14.75L7.26047 21.7207ZM7.96667 22.2667C7.90328 22.2658 7.84027 22.2566 7.7793 22.2392L14.75 15.2685L21.7207 22.2392C21.6598 22.2566 21.5968 22.2658 21.5334 22.2667H7.96667Z" fill="#100F0F" stroke="#100F0F" stroke-width="0.458335"/>
                            <path d="M1.36667 7.23334H5.03334C5.23585 7.23334 5.40001 7.06917 5.40001 6.86667C5.40001 6.66416 5.23585 6.5 5.03334 6.5H1.36667C1.16416 6.5 1 6.66416 1 6.86667C1 7.06917 1.16416 7.23334 1.36667 7.23334Z" fill="#100F0F" stroke="#100F0F" stroke-width="0.458335"/>
                            <path d="M1.36667 22.9999H5.03334C5.23585 22.9999 5.40001 22.8358 5.40001 22.6333C5.40001 22.4308 5.23585 22.2666 5.03334 22.2666H1.36667C1.16416 22.2666 1 22.4308 1 22.6333C1 22.8358 1.16416 22.9999 1.36667 22.9999Z" fill="#100F0F" stroke="#100F0F" stroke-width="0.458335"/>
                            <path d="M4.75132 10.7683C4.88092 10.924 5.11223 10.9452 5.26795 10.8156C5.42368 10.686 5.44486 10.4547 5.31525 10.299L3.48191 8.09895C3.40989 8.01917 3.30743 7.97363 3.19995 7.97363C3.09246 7.97363 2.99001 8.01917 2.91798 8.09895L1.08464 10.299C0.955038 10.4547 0.976215 10.686 1.13194 10.8156C1.28767 10.9452 1.51897 10.924 1.64858 10.7683L2.83328 9.34636V20.1543L1.64858 18.7323C1.51897 18.5766 1.28767 18.5554 1.13194 18.685C0.976215 18.8146 0.955038 19.0459 1.08464 19.2017L2.91798 21.4017C2.98764 21.4855 3.09097 21.5339 3.19995 21.5339C3.30892 21.5339 3.41225 21.4855 3.48191 21.4017L5.31525 19.2017C5.39909 19.1009 5.42282 18.9631 5.3775 18.8401C5.33218 18.7172 5.22469 18.6277 5.09553 18.6055C4.96637 18.5832 4.83516 18.6316 4.75132 18.7323L3.56662 20.1543V9.34636L4.75132 10.7683Z" fill="#100F0F" stroke="#100F0F" stroke-width="0.458335"/>
                            <path d="M22.6335 1C22.431 1 22.2668 1.16416 22.2668 1.36667V5.03334C22.2668 5.23585 22.431 5.40001 22.6335 5.40001C22.836 5.40001 23.0002 5.23585 23.0002 5.03334V1.36667C23.0002 1.16416 22.836 1 22.6335 1Z" fill="#100F0F" stroke="#100F0F" stroke-width="0.458335"/>
                            <path d="M6.86667 1C6.66416 1 6.5 1.16416 6.5 1.36667V5.03334C6.5 5.23585 6.66416 5.40001 6.86667 5.40001C7.06917 5.40001 7.23334 5.23585 7.23334 5.03334V1.36667C7.23334 1.16416 7.06917 1 6.86667 1Z" fill="#100F0F" stroke="#100F0F" stroke-width="0.458335"/>
                            <path d="M10.8154 1.13221C10.7531 1.05734 10.6636 1.01031 10.5666 1.0015C10.4696 0.992698 10.3731 1.02284 10.2984 1.08528L8.09839 2.91862C8.01485 2.98828 7.96655 3.09144 7.96655 3.20022C7.96655 3.30899 8.01485 3.41216 8.09839 3.48182L10.2984 5.31516C10.399 5.39913 10.5368 5.42305 10.6598 5.3779C10.7828 5.33276 10.8724 5.22542 10.8948 5.0963C10.9172 4.96719 10.8691 4.83593 10.7685 4.75196L9.34616 3.56689H20.1541L18.7318 4.75196C18.6311 4.83593 18.583 4.96719 18.6054 5.0963C18.6278 5.22542 18.7174 5.33276 18.8404 5.3779C18.9635 5.42305 19.1012 5.39913 19.2018 5.31516L21.4018 3.48182C21.4854 3.41216 21.5337 3.30899 21.5337 3.20022C21.5337 3.09144 21.4854 2.98828 21.4018 2.91862L19.2018 1.08528C19.1012 1.00131 18.9635 0.977392 18.8404 1.02254C18.7174 1.06768 18.6278 1.17502 18.6054 1.30414C18.583 1.43325 18.6311 1.56451 18.7318 1.64848L20.1541 2.83355H9.34616L10.7685 1.64848C10.9239 1.51885 10.9449 1.28776 10.8154 1.13221Z" fill="#100F0F" stroke="#100F0F" stroke-width="0.458335"/>
                        </svg>
                    </button>
                    
                    <!-- Кнопка для безопасной зоны -->
                    <button class="tool-button-new" id="toggleSafetyZone">
                        <svg width="26" height="24" viewBox="0 0 26 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19.7637 19.5152H24.2728C24.4803 19.5152 24.6485 19.347 24.6485 19.1395V18.388C24.6485 18.1804 24.4803 18.0122 24.2728 18.0122H19.7637C19.5562 18.0122 19.3879 18.1804 19.3879 18.388V19.1395C19.3879 19.347 19.5562 19.5152 19.7637 19.5152Z" stroke="black" stroke-width="1.2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M21.2666 9.74546H22.7697C22.9772 9.74546 23.1454 9.57722 23.1454 9.36971V4.86061C23.1454 4.6531 22.9772 4.48486 22.7697 4.48486H21.2666C21.0591 4.48486 20.8909 4.6531 20.8909 4.86061V9.36971C20.8909 9.57722 21.0591 9.74546 21.2666 9.74546Z" stroke="black" stroke-width="1.2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M22.7695 18.0123V9.74561" stroke="black" stroke-width="1.2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M21.2666 15.7577V9.74561" stroke="black" stroke-width="1.2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M21.2666 18.0123V15" stroke="black" stroke-width="1.2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M1.72731 19.5152H6.23641C6.44392 19.5152 6.61216 19.347 6.61216 19.1395V18.388C6.61216 18.1804 6.44392 18.0122 6.23641 18.0122H1.72731C1.5198 18.0122 1.35156 18.1804 1.35156 18.388V19.1395C1.35156 19.347 1.5198 19.5152 1.72731 19.5152Z" stroke="black" stroke-width="1.2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M5.10899 5.98786V4.86061C5.10899 4.6531 4.94076 4.48486 4.73324 4.48486H3.23024C3.02273 4.48486 2.85449 4.6531 2.85449 4.86061V9.36971C2.85449 9.57722 3.02273 9.74546 3.23024 9.74546H4.73329C4.9408 9.74546 5.10904 9.57722 5.10904 9.36971V6" stroke="black" stroke-width="1.2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M4.7334 18.0123V9.74561" stroke="black" stroke-width="1.2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M3.23022 18.0123V9.74561" stroke="black" stroke-width="1.2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M20.8909 5.23633H5.10913" stroke="black" stroke-width="1.2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M20.8909 8.99414H5.10913" stroke="black" stroke-width="1.2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M11.8728 5.23633L8.11523 8.99388" stroke="black" stroke-width="1.2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M17.8848 5.23633L14.1272 8.99388" stroke="black" stroke-width="1.2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M14.8787 5.23633L11.1211 8.99388" stroke="black" stroke-width="1.2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M20.8909 5.23633L17.1333 8.99388" stroke="black" stroke-width="1.2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M8.86668 5.23633L5.10913 8.99388" stroke="black" stroke-width="1.2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                    
                    <!-- Кнопка для снимка экрана -->
                    <button class="tool-button-new" id="saveScreenshot">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M19.25 3.25V7.25C19.25 7.664 19.586 8 20 8C20.414 8 20.75 7.664 20.75 7.25V3.25C20.75 2.836 20.414 2.5 20 2.5C19.586 2.5 19.25 2.836 19.25 3.25Z" fill="black"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M18 6H22C22.414 6 22.75 5.664 22.75 5.25C22.75 4.836 22.414 4.5 22 4.5H18C17.586 4.5 17.25 4.836 17.25 5.25C17.25 5.664 17.586 6 18 6Z" fill="black"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M14 3H9.118C8.455 3 7.849 3.375 7.553 3.967L6.606 5.862C6.563 5.946 6.477 6 6.382 6H4C2.481 6 1.25 7.231 1.25 8.75V18.75C1.25 19.479 1.54 20.179 2.055 20.695C2.571 21.21 3.271 21.5 4 21.5H20C20.729 21.5 21.429 21.21 21.945 20.695C22.46 20.179 22.75 19.479 22.75 18.75C22.75 15.703 22.75 10.25 22.75 10.25C22.75 9.836 22.414 9.5 22 9.5C21.586 9.5 21.25 9.836 21.25 10.25V18.75C21.25 19.082 21.118 19.399 20.884 19.634C20.649 19.868 20.332 20 20 20H4C3.668 20 3.351 19.868 3.116 19.634C2.882 19.399 2.75 19.082 2.75 18.75V8.75C2.75 8.06 3.31 7.5 4 7.5H6.382C7.045 7.5 7.651 7.125 7.947 6.533L8.894 4.638C8.937 4.554 9.023 4.5 9.118 4.5H14C14.414 4.5 14.75 4.164 14.75 3.75C14.75 3.336 14.414 3 14 3Z" fill="black"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M12 8.5C9.378 8.5 7.25 10.628 7.25 13.25C7.25 15.872 9.378 18 12 18C14.622 18 16.75 15.872 16.75 13.25C16.75 10.628 14.622 8.5 12 8.5ZM12 10C13.794 10 15.25 11.456 15.25 13.25C15.25 15.044 13.794 16.5 12 16.5C10.206 16.5 8.75 15.044 8.75 13.25C8.75 11.456 10.206 10 12 10Z" fill="black"/>
                        </svg>
                    </button>
                    
                    <!-- Кнопка для настройки площадки -->
                    <button class="tool-button-new" id="playgroundButton">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="3" y="3" width="18" height="18" rx="2" stroke="#000000" stroke-width="2"/>
                            <line x1="3" y1="12" x2="21" y2="12" stroke="#000000" stroke-width="2"/>
                            <line x1="12" y1="3" x2="12" y2="21" stroke="#000000" stroke-width="2"/>
                        </svg>
                    </button>
                    
                    <!-- Кнопка для удаления всех моделей -->
                    <button class="tool-button-new" id="deleteAllModels">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M4 7H20" stroke="#000000" stroke-width="2" stroke-linecap="round"/>
                            <path d="M10 11V17" stroke="#000000" stroke-width="2" stroke-linecap="round"/>
                            <path d="M14 11V17" stroke="#000000" stroke-width="2" stroke-linecap="round"/>
                            <path d="M5 7L6 19C6 20.1046 6.89543 21 8 21H16C17.1046 21 18 20.1046 18 19L19 7" stroke="#000000" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </button>

                    <!-- Кнопка помощи -->
                    <button class="tool-button-new" id="helpButton">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="10" stroke="#000000" stroke-width="2"/>
                            <path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <circle cx="12" cy="17" r="1" fill="#000000"/>
                        </svg>
                    </button>
                    
                    <!-- Кнопка для закрытия -->
                    <button class="tool-button-new" id="closeAppButton">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M18 6L6 18" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M6 6L18 18" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <!-- Настройки площадки (расширенная панель) -->
            <div id="playgroundSettings" class="playground-settings hidden">
                <h3>Настройки площадки</h3>
                
                <table id="playgroundColorPicker" class="color-table">
                    <tr>
                        <td align="center"><div class="color-square" data-color="серый" style="background-color: #D9D9D9;"></div></td>
                        <td align="center"><div class="color-square" data-color="черный" style="background-color: #100F0F;"></div></td>
                        <td align="center"><div class="color-square selected" data-color="зеленый" style="background-color: #2E7D32;"></div></td>
                        <td align="center"><div class="color-square" data-color="коричневый" style="background-color: #5D4037;"></div></td>
                    </tr>
                </table>
                
                <div class="size-controls">
                    <div class="size-inputs-row">
                        <div class="size-input-container">
                            <input type="text" id="widthInput" value="40" class="size-input" inputmode="numeric" pattern="[0-9]*">
                        </div>
                        <div class="size-input-container">
                            <input type="text" id="lengthInput" value="30" class="size-input" inputmode="numeric" pattern="[0-9]*">
                        </div>
                    </div>
                    <div class="sliders-row">
                        <div class="slider-container">
                            <input type="range" id="widthSlider" min="10" max="100" value="40" step="1" class="slider">
                        </div>
                        <div class="slider-container">
                            <input type="range" id="lengthSlider" min="10" max="100" value="30" step="1" class="slider">
                        </div>
                    </div>
                </div>
                
                <div id="playgroundStatus">
                    Площадка: 40м × 30м
                </div>
            </div>
            <!-- Метки размеров -->
            <div id="dimensionLabels">
                <div id="widthLabel" class="dimension-label">40м</div>
                <div id="lengthLabel" class="dimension-label">30м</div>
            </div>
            
            <!-- Уведомления -->
            <div id="notification" class="notification hidden">
                <div class="notification-content">
                    <span class="notification-message">Объект не может быть размещен в этой позиции!</span>
                    <span class="notification-close" onclick="document.getElementById('notification').classList.add('hidden')">&times;</span>
                </div>
            </div>
            
            <!-- Индикатор загрузки -->
            <div id="loadingOverlay" class="loading-overlay hidden">
                <div class="loading-spinner"></div>
                <div class="loading-text">Загрузка площадки...</div>
            </div>
            
            <!-- Подключаем модули JavaScript -->
            <script type="module" src="js/models.js"></script>
            <script type="module" src="js/app.js"></script>
        </div>
    </div>
    
    <!-- Новое модальное окно настроек площадки -->
    <div id="pgModalBackdrop" class="pg-modal-backdrop"></div>
    <div id="pgModal" class="pg-modal">
        <h3 class="pg-modal-title">Площадка</h3>
        
        <div class="pg-modal-inputs">
            <div class="pg-input-container">
                <input type="text" id="pgWidthInput" class="pg-input" value="40" placeholder="Ширина, м">
            </div>
            <div class="pg-input-container">
                <input type="text" id="pgLengthInput" class="pg-input" value="30" placeholder="Длина, м">
            </div>
        </div>
        
        <div class="pg-color-label">Цвет площадки:</div>
        
        <div class="pg-color-picker">
            <div class="pg-color-square" data-color="серый" style="background-color: #D9D9D9;"></div>
            <div class="pg-color-square" data-color="черный" style="background-color: #100F0F;"></div>
            <div class="pg-color-square selected" data-color="зеленый" style="background-color: #2E7D32;"></div>
            <div class="pg-color-square" data-color="коричневый" style="background-color: #5D4037;"></div>
            <div class="pg-color-square" data-color="синий" style="background-color: #1976D2;"></div>
            <div class="pg-color-square" data-color="красный" style="background-color: #D32F2F;"></div>
            <div class="pg-color-square" data-color="фиолетовый" style="background-color: #7B1FA2;"></div>
            <div class="pg-color-square" data-color="оранжевый" style="background-color: #F57C00;"></div>
            <div class="pg-color-square" data-color="желтый" style="background-color: #FBC02D;"></div>
            <div class="pg-color-square" data-color="розовый" style="background-color: #C2185B;"></div>
            <div class="pg-color-square" data-color="бирюзовый" style="background-color: #00ACC1;"></div>
            <div class="pg-color-square" data-color="лайм" style="background-color: #689F38;"></div>
        </div>
        
        <button class="pg-apply-button" id="pgApplyButton">Применить</button>
        
        <button class="pg-close-button" id="pgCloseButton">&times;</button>
    </div>

    <!-- Модальное окно помощи с видео -->
    <div id="helpModal" class="modal">
        <div class="modal-content help-modal-content">
            <div class="help-modal-header">
                <h3>Как пользоваться приложением</h3>
                <button class="help-close-button" id="helpCloseButton">&times;</button>
            </div>
            <div class="help-modal-body">
                <div class="video-container">
                    <video id="helpVideo" controls preload="metadata" poster="videos/help-tutorial.jpg">
                        <source src="videos/help-tutorial.mp4" type="video/mp4">
                        Ваш браузер не поддерживает видео.
                    </video>
                </div>
                <div class="help-content">
                    <h4>Основные возможности:</h4>
                    <ul>
                        <li>Перетаскивайте элементы из каталога на площадку</li>
                        <li>Изменяйте размеры и цвет площадки</li>
                        <li>Поворачивайте и перемещайте объекты</li>
                        <li>Включайте отображение безопасных зон</li>
                        <li>Делайте скриншоты готового проекта</li>
                        <li>Сохраняйте и загружайте конфигурации</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Подключаем модуль для управления модальным окном -->
    <script type="module" src="js/modal.js"></script>
    <!-- Подключаем модуль для управления настройками площадки -->
    <script type="module" src="js/pg-modal.js"></script>
    <!-- Подключаем модуль для управления модальным окном помощи -->
    <script type="module" src="js/helpModal.js"></script>
    <!-- Подключаем единый модуль инициализации приложения -->
    <script type="module" src="js/appInit.js"></script>
</body>
</html>