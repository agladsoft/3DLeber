#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –Ω–æ–≤—ã–µ —Å—Ç–∏–ª–∏

echo "üé® –ù–∞—á–∏–Ω–∞–µ–º –º–∏–≥—Ä–∞—Ü–∏—é –Ω–∞ –Ω–æ–≤—ã–π –¥–∏–∑–∞–π–Ω..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
if [ ! -f "package.json" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞: –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞"
    exit 1
fi

# –°–æ–∑–¥–∞–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏
echo "üì¶ –°–æ–∑–¥–∞–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏..."
mkdir -p backup_$(date +%Y%m%d_%H%M%S)
cp -r css backup_$(date +%Y%m%d_%H%M%S)/
cp index.html backup_$(date +%Y%m%d_%H%M%S)/
cp -r js backup_$(date +%Y%m%d_%H%M%S)/

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã
if [ ! -f "css/styles_new.css" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞: –Ω–æ–≤—ã–π CSS —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω"
    exit 1
fi

if [ ! -f "index_new.html" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞: –Ω–æ–≤—ã–π HTML —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω"
    exit 1
fi

# –ü—Ä–∏–º–µ–Ω—è–µ–º –Ω–æ–≤—ã–µ —Å—Ç–∏–ª–∏
echo "üîÑ –ü—Ä–∏–º–µ–Ω—è–µ–º –Ω–æ–≤—ã–µ —Å—Ç–∏–ª–∏..."
cp css/styles_new.css css/styles.css
cp index_new.html index.html

# –î–æ–±–∞–≤–ª—è–µ–º —à—Ä–∏—Ñ—Ç—ã Google Fonts –≤ index.html –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
if ! grep -q "fonts.googleapis.com" index.html; then
    echo "üìù –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —à—Ä–∏—Ñ—Ç–æ–≤..."
    sed -i '' '/<\/head>/i\
    <link href="https://fonts.googleapis.com/css2?family=TT+Lakes+Neue:wght@300;400;500;700&family=Inter+Tight:wght@400;500;600;700&display=swap" rel="stylesheet">' index.html
fi

echo "‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
echo ""
echo "üìã –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:"
echo "  - –°–æ–∑–¥–∞–Ω—ã —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –≤ –ø–∞–ø–∫–µ backup_*"
echo "  - –ü—Ä–∏–º–µ–Ω–µ–Ω—ã –Ω–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –∏–∑ Figma"
echo "  - –û–±–Ω–æ–≤–ª–µ–Ω HTML —Å –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π"
echo "  - –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —à—Ä–∏—Ñ—Ç—ã"
echo ""
echo "üöÄ –¢–µ–ø–µ—Ä—å –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç –∫–æ–º–∞–Ω–¥–æ–π: npm run dev"